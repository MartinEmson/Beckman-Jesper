import {
  e
} from "./chunk-QQPUQYLM.js";
import {
  require_jsx_runtime
} from "./chunk-7CERL6O6.js";
import {
  require_react
} from "./chunk-EPSXJ6EN.js";
import {
  __toESM
} from "./chunk-LNEMQRCO.js";

// node_modules/lenis/dist/lenis-react.mjs
var import_jsx_runtime = __toESM(require_jsx_runtime(), 1);

// node_modules/@darkroom.engineering/tempus/dist/tempus.modern.mjs
var a = "undefined" != typeof window && new class {
  constructor() {
    this.raf = (a3) => {
      requestAnimationFrame(this.raf);
      const t = a3 - this.now;
      this.now = a3;
      for (let s2 = 0; s2 < this.callbacks.length; s2++)
        this.callbacks[s2].callback(a3, t);
    }, this.callbacks = [], this.now = performance.now(), requestAnimationFrame(this.raf);
  }
  add(a3, t = 0) {
    return this.callbacks.push({ callback: a3, priority: t }), this.callbacks.sort((a4, t2) => a4.priority - t2.priority), () => this.remove(a3);
  }
  remove(a3) {
    this.callbacks = this.callbacks.filter(({ callback: t }) => a3 !== t);
  }
}();

// node_modules/clsx/dist/clsx.mjs
function r(e2) {
  var t, f2, n = "";
  if ("string" == typeof e2 || "number" == typeof e2)
    n += e2;
  else if ("object" == typeof e2)
    if (Array.isArray(e2)) {
      var o2 = e2.length;
      for (t = 0; t < o2; t++)
        e2[t] && (f2 = r(e2[t])) && (n && (n += " "), n += f2);
    } else
      for (f2 in e2)
        e2[f2] && (n && (n += " "), n += f2);
  return n;
}
function clsx() {
  for (var e2, t, f2 = 0, n = "", o2 = arguments.length; f2 < o2; f2++)
    (e2 = arguments[f2]) && (t = r(e2)) && (n && (n += " "), n += t);
  return n;
}
var clsx_default = clsx;

// node_modules/lenis/dist/lenis-react.mjs
var import_react = __toESM(require_react(), 1);
var p = (0, import_react.createContext)(null);
var d = new class Store {
  constructor(r3) {
    this.listeners = [], this.state = r3;
  }
  set(r3) {
    this.state = r3;
    for (let r4 of this.listeners)
      r4(this.state);
  }
  subscribe(r3) {
    return this.listeners = [...this.listeners, r3], () => {
      this.listeners = this.listeners.filter((e2) => e2 !== r3);
    };
  }
  get() {
    return this.state;
  }
}({});
function useCurrentLenis() {
  const r3 = (0, import_react.useContext)(p), e2 = function useStore(r4) {
    const [e3, t] = (0, import_react.useState)(r4.get());
    return (0, import_react.useEffect)(() => r4.subscribe((r5) => t(r5)), [r4]), e3;
  }(d);
  return null != r3 ? r3 : e2;
}
function useLenis(r3, e2 = [], t = 0) {
  const { lenis: n, addCallback: s2, removeCallback: o2 } = useCurrentLenis();
  return (0, import_react.useEffect)(() => {
    if (r3 && s2 && o2 && n)
      return s2(r3, t), r3(n), () => {
        o2(r3);
      };
  }, [n, s2, o2, t, ...e2]), n;
}
var m = (0, import_react.forwardRef)((o2, i2) => {
  var { children: f2, root: m2 = false, options: b = {}, autoRaf: h = true, rafPriority: y = 0, className: v } = o2, g = function __rest(r3, e2) {
    var t = {};
    for (var n in r3)
      Object.prototype.hasOwnProperty.call(r3, n) && e2.indexOf(n) < 0 && (t[n] = r3[n]);
    if (null != r3 && "function" == typeof Object.getOwnPropertySymbols) {
      var s2 = 0;
      for (n = Object.getOwnPropertySymbols(r3); s2 < n.length; s2++)
        e2.indexOf(n[s2]) < 0 && Object.prototype.propertyIsEnumerable.call(r3, n[s2]) && (t[n[s2]] = r3[n[s2]]);
    }
    return t;
  }(o2, ["children", "root", "options", "autoRaf", "rafPriority", "className"]);
  const O = (0, import_react.useRef)(null), k = (0, import_react.useRef)(null), [N, j] = (0, import_react.useState)(void 0), C = (0, import_react.useRef)([]), w = (0, import_react.useCallback)((r3, e2) => {
    C.current.push({ callback: r3, priority: e2 }), C.current.sort((r4, e3) => r4.priority - e3.priority);
  }, []), S = (0, import_react.useCallback)((r3) => {
    C.current = C.current.filter((e2) => e2.callback !== r3);
  }, []);
  (0, import_react.useImperativeHandle)(i2, () => ({ wrapper: O.current, content: k.current, lenis: N }), [N]), (0, import_react.useEffect)(() => {
    const r3 = new e(Object.assign(Object.assign({}, b), !m2 && { wrapper: O.current, content: k.current }));
    return j(r3), () => {
      r3.destroy(), j(void 0);
    };
  }, [m2, JSON.stringify(b)]), (0, import_react.useEffect)(() => {
    if (N && h)
      return a.add((r3) => {
        null == N || N.raf(r3);
      }, y);
  }, [N, h, y]), (0, import_react.useEffect)(() => {
    if (m2 && N)
      return d.set({ lenis: N, addCallback: w, removeCallback: S }), () => d.set({});
  }, [m2, N, w, S]);
  const P = (0, import_react.useCallback)((r3) => {
    for (let e2 = 0; e2 < C.current.length; e2++)
      C.current[e2].callback(r3);
  }, []);
  (0, import_react.useEffect)(() => (null == N || N.on("scroll", P), () => {
    null == N || N.off("scroll", P);
  }), [N, P]);
  const x = (0, import_react.useCallback)(() => {
    O.current && (O.current.className = clsx_default(null == N ? void 0 : N.className, v));
  }, [N, v]);
  return (0, import_react.useEffect)(() => (x(), null == N || N.on("className change", x), () => {
    null == N || N.off("className change", x);
  }), [N, x]), (0, import_jsx_runtime.jsx)(p.Provider, { value: { lenis: N, addCallback: w, removeCallback: S }, children: m2 ? f2 : (0, import_jsx_runtime.jsx)("div", Object.assign({ ref: O, className: clsx_default(null == N ? void 0 : N.className, v) }, g, { children: (0, import_jsx_runtime.jsx)("div", { ref: k, children: f2 }) })) });
});
export {
  m as Lenis,
  p as LenisContext,
  m as ReactLenis,
  m as default,
  useLenis
};
//# sourceMappingURL=lenis_react.js.map
